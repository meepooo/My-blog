20190517

åˆ›å»ºvueé¡¹ç›®

1ã€å¼•å…¥vue.jsåº“

<script src="lib/vue.js"></script>

è¿™å°†æš´éœ²å‡ºä¸€ä¸ªå…¨å±€ç±»â€”â€”Vueï¼Œä½ å¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªVueå®ä¾‹ã€‚

2ã€åˆ›å»ºVueå®ä¾‹

Vueæ˜¯ä¸€ä¸ªå°è£…äº†å“åº”å¼å¼€å‘ã€æ¨¡æ¿ç¼–è¯‘ç­‰è¯¸å¤šç‰¹æ€§çš„åŸºç¡€ç±»ï¼Œä½ é€šè¿‡æä¾›ä¸€äº› é…ç½®é¡¹ï¼Œæ¥åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼š

var vm = new Vue({...});

var vm = new Vue({
  template: '<h1>Hello,Vue.js 2</h1>'
})

ä¸€ä¸ªå¸¸è§çš„é…ç½®é¡¹æ˜¯templateï¼Œä»¥ç±»ä¼¼HTMLçš„è¯­æ³•æ¥ç¼–åˆ¶è§†å›¾çš„ç»“æ„ï¼š

3ã€æ¸²æŸ“Vueå®ä¾‹

è¦å°†Vueå®ä¾‹æ¸²æŸ“åˆ°HTMLé¡µé¢ä¸­ï¼Œé‡‡ç”¨Vueå®ä¾‹çš„$mount()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³• çš„åç§°ï¼Œæ„å‘³ç€æ¸²æŸ“å®é™…ä¸Šæ˜¯å°†Vueå®ä¾‹ç”Ÿæˆçš„ï¼ˆè™šæ‹Ÿï¼‰DOMå­æ ‘ï¼ŒæŒ‚æ¥åˆ°é¡µé¢DOMä¸­ã€‚

å®¹æ˜“ç†è§£ï¼Œ$mount()æ–¹æ³•éœ€è¦æŒ‡å®šä¸€ä¸ªå®šä½ç”¨çš„DOMèŠ‚ç‚¹â€”â€”â€”é”šç‚¹ï¼š


vm.$mount(anchor_element);

Vue.jsä¼šå°†æ¸²æŸ“å‡ºçš„DOMå­æ ‘ï¼Œæ’å…¥é”šç‚¹å…ƒç´ ä¹‹å‰ï¼ˆå¹¶æœ€ç»ˆåˆ é™¤è¿™ä¸ªé”šç‚¹å…ƒç´ ï¼‰ã€‚

å¯ä»¥ä½¿ç”¨CSSé€‰æ‹©ç¬¦æˆ–è€…æŒ‡å®šä¸€ä¸ªHTMLElementæ¥å£°æ˜é”šç‚¹ã€‚ä¾‹å¦‚ï¼Œ ä¸‹é¢çš„ç¤ºä¾‹å°†Vueå®ä¾‹æŒ‚æ¥åˆ°idä¸ºappçš„DOMå¯¹è±¡å¤„ï¼š


vm.$mount('#app');
4ã€ç¤ºä¾‹ä»£ç 


<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š -->
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		
		<!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
	</head>
	<body>
		<h1>vueç¤ºä¾‹</h1>
		<h1 id="app"></h1>
		<script type="text/javascript">
			var vm = new Vue({
				template: '<h1>Hello,Vue.js 1</h1>'
			})
			
			vm.$mount('#app')
		</script>
	</body>
</html>

æ”¹å˜htmlçš„å†…å®¹å¹¶ä¿å­˜ï¼Œé¡µé¢ä¼šéšä¹‹åˆ·æ–°ã€‚

eléšå¼æ¸²æŸ“

å¦‚æœVue.jsæ£€æµ‹åˆ°ä½ æŒ‡å®šäº†elé…ç½®é¡¹ï¼Œå°†åœ¨å†…éƒ¨è‡ªåŠ¨åœ°æ‰§è¡Œæ¸²æŸ“ â€”â€” è¿™æ—¶ä½  ä¸å†éœ€è¦é¢å¤–è°ƒç”¨$mount()æ–¹æ³•ã€‚

Vue({
  template: '<h1>Hello,Vue.js 2!</h1>',
  el: '#app'
})

ç¤ºä¾‹

<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š -->
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
		
		<!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
	</head>
	<body>
		<h1>vueç¤ºä¾‹</h1>
		<h1 id="app"></h1>
		<script type="text/javascript">
			var vm = new Vue({
				template: '<h1>Hello,Vue.js 2</h1>',
				el:'#app'
			})
		</script>
	</body>
</html>

æ¨¡æ¿ template

æ¨¡æ¿çš„å­˜åœ¨çš„å”¯ä¸€ç›®çš„ï¼Œæ˜¯ä¸ºäº†å’Œæ•°æ®ç»‘å®šã€‚

var vm = new Vue({
  template:'<h1>{{name}}</h1>',
  data:{
    name:'Elton John'
  },
  el:'#app'
})

å½“Vue.jsåˆ›å»ºä¸€ä¸ªVueå®ä¾‹æ—¶ï¼Œå®ƒä¼šå°†dataé…ç½®é¡¹çš„æ¯ä¸ªæ ¹å±æ€§ï¼Œï¼ˆç»è¿‡è‹¥å¹²å¤„ç†åï¼‰ æ·»åŠ ä¸ºå®ä¾‹çš„æ ¹å±æ€§ã€‚
å³ï¼š

vm:Vue

$options
$mount()
name
å› æ­¤ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¯ä»¥åœ¨æ¨¡æ¿ä¸­ç»‘å®šå®ä¾‹çš„ä»»æ„å±æ€§ã€‚ä¾‹å¦‚ï¼šä¸‹é¢çš„æ¨¡æ¿å¯ä»¥è¾“å‡º $mount()æ–¹æ³•çš„æºä»£ç ï¼š


<pre>{{$mount}}</pre>

å“åº”å¼è®¡ç®— ä¸ äº¤äº’è¡Œä¸ºå£°æ˜

å“åº”å¼è®¡ç®—æ˜¯ä¸€ç§é¢å‘å˜åŒ–ä¼ æ’­çš„ç¼–ç¨‹èŒƒå¼ï¼Œå“åº”å¼è®¡ç®—æ¨¡å‹ä¸»è¦åŒ…æ‹¬ ä¸¤ä¸ªéƒ¨åˆ†ï¼šæ•°æ®æºå’Œï¼ˆä¾èµ–äºæ•°æ®æºçš„ï¼‰è®¡ç®—è¿‡ç¨‹ã€‚å½“æ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œ å°†è‡ªåŠ¨æ‰§è¡Œè®¡ç®—è¿‡ç¨‹ï¼ˆæ¯”å¦‚è§†å›¾çš„æ¸²æŸ“è¿‡ç¨‹ï¼‰ã€‚å®ƒä½¿å¾—æˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ æ•°æ®æºå°±å¯ä»¥è‡ªåŠ¨æ›´æ–°ç”¨æˆ·ç•Œé¢ã€‚

è§†å›¾çš„ä½œç”¨æ˜¯åŒå‘çš„ï¼Œé™¤äº†å‘ç”¨æˆ·å±•ç¤ºä¿¡æ¯ï¼Œå¦ä¸€æ–¹é¢çš„ç”¨é€”åœ¨äºé‡‡é›†ç”¨æˆ·çš„è¾“å…¥ã€‚

å’Œæ•°æ®ç»‘å®šç±»ä¼¼ï¼ŒVue.jsé€šè¿‡æ‰©å±•æ¨¡æ¿çš„HTMLè¯­æ³•ï¼Œæ¥å£°æ˜å¯¹ç”¨æˆ·äº¤äº’äº‹ä»¶ çš„ç›‘å¬ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„æ¨¡æ¿å‘Vue.jsæ¡†æ¶å£°æ˜äº†å¯¹buttonå…ƒç´ çš„click äº‹ä»¶çš„ç›‘å¬ï¼š


<button v-on:click="counter=0">RESET</button>

å®¹æ˜“æ³¨æ„åˆ°buttonå…ƒç´ çš„ç‰¹æ®Šå±æ€§ï¼šv-on:clickã€‚åœ¨Vue.jsä¸­ï¼Œè¿™ç§ä»¥ v-ä¸ºå‰ç¼€çš„ç‰¹æ®Šçš„HTMLå±æ€§ï¼Œè¢«ç§°ä¸ºæŒ‡ä»¤ï¼Œé€šå¸¸ç”¨æ¥å¢å¼ºæˆ–æ”¹å˜æ‰€åœ¨ HTMLå…ƒç´ çš„è¡Œä¸ºã€‚ä¾‹å¦‚ï¼Œv-onæŒ‡ä»¤çš„ä½œç”¨ï¼Œå°±æ˜¯ä¸ºå®¿ä¸»å…ƒç´ ï¼ˆåœ¨è¿™é‡Œæ˜¯buttonï¼‰ å£°æ˜äº‹ä»¶ç›‘å¬

å®ä¾‹æ–¹æ³•å£°æ˜

æ–¹æ³•ä¸thisç”¨æ³•

# å®ä¾‹
new Vue({
  template: '<button v-on:click="reset">{{counter}}</button>',
  data: { counter: 0},
  methods: {
    reset: function(){ this.counter = 0; }
  }
})

# è°ƒç”¨
vm.handler();
v- æŒ‡ä»¤

v-bind

v-bind ç‰¹æ€§è¢«ç§°ä¸ºæŒ‡ä»¤ã€‚æŒ‡ä»¤å¸¦æœ‰å‰ç¼€ v-ï¼Œä»¥è¡¨ç¤ºå®ƒä»¬æ˜¯ Vue æä¾›çš„ç‰¹æ®Šç‰¹æ€§ã€‚å®ƒä»¬ä¼šåœ¨æ¸²æŸ“çš„ DOM ä¸Šåº”ç”¨ç‰¹æ®Šçš„å“åº”å¼è¡Œä¸ºã€‚åœ¨è¿™é‡Œï¼Œè¯¥æŒ‡ä»¤çš„æ„æ€æ˜¯ï¼šâ€œå°†è¿™ä¸ªå…ƒç´ èŠ‚ç‚¹çš„ title ç‰¹æ€§å’Œ Vue å®ä¾‹çš„ message å±æ€§ä¿æŒä¸€è‡´â€ã€‚

<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š -->
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

		<!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
	</head>
	<body>
		<h1>vueç¤ºä¾‹</h1>

		<div id="app">
			<span v-bind:title="message">
				é¼ æ ‡æ‚¬åœå‡ ç§’é’ŸæŸ¥çœ‹æ­¤å¤„åŠ¨æ€ç»‘å®šçš„æç¤ºä¿¡æ¯ï¼
			</span>
		</div>

		<script type="text/javascript">
			var app2 = new Vue({
				el: '#app',
				data: {
					message: 'é¡µé¢åŠ è½½äº ' + new Date().toLocaleString()
				}
			})
		</script>

		scr
	</body>
</html>

ä¸€ä¸ªv-bindç”¨æ³•ç¤ºä¾‹

<form action="index.html" method="get">
	<input type="submit" value="submit"/>
</form>
		
<form v-bind:action="newacction" v-bind:method="newmethod" id="app2">
	<input type="submit" value="submit"/>
</form>
		
<script type="text/javascript">
	var app2 = new Vue({
		el: '#app2',
		data: {
			newacction: 'index2.html',
			newmethod: 'get'
		}
	})
</script>

v-if æ¡ä»¶ä¸å¾ªç¯

æ§åˆ¶åˆ‡æ¢ä¸€ä¸ªå…ƒç´ æ˜¯å¦æ˜¾ç¤ºä¹Ÿç›¸å½“ç®€å•ï¼š

<div id="app-3">
  <p v-if="seen">ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†</p>
</div>
var app3 = new Vue({
  el: '#app-3',
  data: {
    seen: true
  }
})

v-if ç¤ºä¾‹


<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<!-- å¼€å‘ç¯å¢ƒç‰ˆæœ¬ï¼ŒåŒ…å«äº†æœ‰å¸®åŠ©çš„å‘½ä»¤è¡Œè­¦å‘Š -->
		<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>

		<!-- ç”Ÿäº§ç¯å¢ƒç‰ˆæœ¬ï¼Œä¼˜åŒ–äº†å°ºå¯¸å’Œé€Ÿåº¦ -->
		<!-- <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
	</head>
	<body>
		<h1>index5.html</h1>

		<div id="app-3">
			<p v-if="seen">ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†</p>
		</div>

		<input type="button" name="" id="bt1" value="æ˜¾ç¤ºä¸éšè—" onclick="test()" />

		<script type="text/javascript">
			var app3 = new Vue({
				el: '#app-3',
				data: {
					seen: true
				}
			})

			function test() {
				if (app3.seen == true)
					app3.seen = false;
				else
					app3.seen = true;

				app3.$mount('#app-3');
			}
		</script>


	</body>
</html>
v-else


<h1 v-if="awesome">Vue is awesome!</h1>
<h1 v-else>Oh no ğŸ˜¢</h1>
ç¤ºä¾‹

<div v-if="Math.random() > 0.5">
  Now you see me
</div>
<div v-else>
  Now you don't
</div>
v-for

v-for æŒ‡ä»¤å¯ä»¥ç»‘å®šæ•°ç»„çš„æ•°æ®æ¥æ¸²æŸ“ä¸€ä¸ªé¡¹ç›®åˆ—è¡¨ã€‚

<div id="app-4">
  <ol>
    <li v-for="todo in todos">
      {{ todo.text }}
    </li>
  </ol>
</div>

var app4 = new Vue({
  el: '#app-4',
  data: {
    todos: [
      { text: 'å­¦ä¹  JavaScript' },
      { text: 'å­¦ä¹  Vue' },
      { text: 'æ•´ä¸ªç‰›é¡¹ç›®' }
    ]
  }
})
v-on

v-on æŒ‡ä»¤æ·»åŠ ä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œé€šè¿‡å®ƒè°ƒç”¨åœ¨ Vue å®ä¾‹ä¸­å®šä¹‰çš„æ–¹æ³•ã€‚

<div id="app-5">
  <p>{{ message }}</p>
  <button v-on:click="reverseMessage">é€†è½¬æ¶ˆæ¯</button>
</div>

var app5 = new Vue({
  el: '#app-5',
  data: {
    message: 'Hello Vue.js!'
  },
  methods: {
    reverseMessage: function () {
      this.message = this.message.split('').reverse().join('')
    }
  }
})

methodä¸thisç”¨æ³•


<div id="app-3">
	<p v-if="seen">ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†</p>
	<input type="button" name="" id="bt1" value="æ˜¾ç¤ºä¸éšè—" v-on:click="method1" />
</div>
	
<script type="text/javascript">
	var app3 = new Vue({
		el: '#app-3',
		data: {
			seen: true					
		},
		methods:{
			method1: function(){
				if (this.seen == true)
					this.seen = false;
				else
					this.seen = true;							
			}
		}
	})
</script>

index å’Œ key

é»˜è®¤ç”¨indexæ’åˆ—


<div v-for="(value, key, index) in object">
  {{ index }}. {{ key }}: {{ value }}
</div>

ä¸ºäº†ç»™ Vue ä¸€ä¸ªæç¤ºï¼Œä»¥ä¾¿å®ƒèƒ½è·Ÿè¸ªæ¯ä¸ªèŠ‚ç‚¹çš„èº«ä»½ï¼Œä»è€Œé‡ç”¨å’Œé‡æ–°æ’åºç°æœ‰å…ƒç´ ï¼Œä½ éœ€è¦ä¸ºæ¯é¡¹æä¾›ä¸€ä¸ªå”¯ä¸€ key å±æ€§ã€‚ç†æƒ³çš„ key å€¼æ˜¯æ¯é¡¹éƒ½æœ‰çš„å”¯ä¸€ idã€‚è¿™ä¸ªç‰¹æ®Šçš„å±æ€§ç›¸å½“äº Vue 1.x çš„ track-by ï¼Œä½†å®ƒçš„å·¥ä½œæ–¹å¼ç±»ä¼¼äºä¸€ä¸ªå±æ€§ï¼Œæ‰€ä»¥ä½ éœ€è¦ç”¨ v-bind æ¥ç»‘å®šåŠ¨æ€å€¼ã€‚


<div v-for="item in items" v-bind:key="item.id">
  <!-- å†…å®¹ -->
</div>
v-model

v-model æŒ‡ä»¤ï¼Œå®ƒèƒ½è½»æ¾å®ç°è¡¨å•è¾“å…¥å’Œåº”ç”¨çŠ¶æ€ä¹‹é—´çš„åŒå‘ç»‘å®šã€‚

<div id="app">
  <h1>{{message}}</h1>
  <input type="text" name="" id="" value="" v-model="message" />
</div>

</div>
<script type="text/javascript">
  var app4 = new Vue({
    el: '#app',
    data: {
      message: "hello vue"
    }
  })
</script>
ç»„ä»¶åŒ–åº”ç”¨æ„å»º

ç»„ä»¶ç³»ç»Ÿæ˜¯ Vue çš„å¦ä¸€ä¸ªé‡è¦æ¦‚å¿µï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ç§æŠ½è±¡ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨å°å‹ã€ç‹¬ç«‹å’Œé€šå¸¸å¯å¤ç”¨çš„ç»„ä»¶æ„å»ºå¤§å‹åº”ç”¨ã€‚ä»”ç»†æƒ³æƒ³ï¼Œå‡ ä¹ä»»æ„ç±»å‹çš„åº”ç”¨ç•Œé¢éƒ½å¯ä»¥æŠ½è±¡ä¸ºä¸€ä¸ªç»„ä»¶æ ‘ã€‚

æ³¨å†Œç»„ä»¶

// å®šä¹‰åä¸º todo-item çš„æ–°ç»„ä»¶åˆ›å»ºvueé¡¹ç›®


Vue.component('todo-item', {
  template: '<li>è¿™æ˜¯ä¸ªå¾…åŠé¡¹</li>'
})

ç»„ä»¶ä½¿ç”¨

<ol>
  <!-- åˆ›å»ºä¸€ä¸ª todo-item ç»„ä»¶çš„å®ä¾‹ -->
  <todo-item></todo-item>
</ol>

ä½¿ç”¨propsæ¥æ”¶å±æ€§

Vue.component('todo-item', {
  // todo-item ç»„ä»¶ç°åœ¨æ¥å—ä¸€ä¸ª
  // "prop"ï¼Œç±»ä¼¼äºä¸€ä¸ªè‡ªå®šä¹‰ç‰¹æ€§ã€‚
  // è¿™ä¸ª prop åä¸º todoã€‚
  props: ['todo'],
  template: '<li>{{ todo.text }}</li>'
})
ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹

ä½¿ç”¨todo-itemæ¨¡æ¿ï¼Œv-forå¾ªç¯ï¼Œitemä¸ºæ•°ç»„groceryListçš„ä¸€é¡¹ï¼›v-bindç»‘å®šå±æ€§ï¼Œtodoç»‘å®šitemï¼Œå³ç»‘å®šæ•°ç»„çš„ä¸€é¡¹ï¼›keyæ˜¯å…³é”®å­—å±æ€§ï¼Œæ¯ä¸ªç»„ä»¶éƒ½éœ€è¦ã€‚

<div id="app-7">
  <ol>
    <!--
      ç°åœ¨æˆ‘ä»¬ä¸ºæ¯ä¸ª todo-item æä¾› todo å¯¹è±¡
      todo å¯¹è±¡æ˜¯å˜é‡ï¼Œå³å…¶å†…å®¹å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚
      æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸ºæ¯ä¸ªç»„ä»¶æä¾›ä¸€ä¸ªâ€œkeyâ€ï¼Œç¨åå†
      ä½œè¯¦ç»†è§£é‡Šã€‚
    -->
    <todo-item
      v-for="item in groceryList"
      v-bind:todo="item"
      v-bind:key="item.id"
    ></todo-item>
  </ol>
</div>
æ³¨å†Œç»„ä»¶å®ä¾‹ï¼š
todo-itemï¼Œä¸ºæ¨¡æ¿ï¼›
todoï¼Œä¸ºdataï¼›
todo.textï¼Œä¸ºdataå†…å®¹ã€‚

Vue.component('todo-item', {
  props: ['todo'],
  template: '<li>{{ todo.text }}</li>'
})

var app7 = new Vue({
  el: '#app-7',
  data: {
    groceryList: [
      { id: 0, text: 'è”¬èœ' },
      { id: 1, text: 'å¥¶é…ª' },
      { id: 2, text: 'éšä¾¿å…¶å®ƒä»€ä¹ˆäººåƒçš„ä¸œè¥¿' }
    ]
  }
})
ç”Ÿå‘½å‘¨æœŸé’©å­ Lifecycle Hook

åˆå§‹åŒ–é’©å­

åˆå§‹åŒ–é’©å­åŒ…æ‹¬beforeCreateå’Œcreatedã€‚è¿™ä¸¤ä¸ªé’©å­å…è®¸æˆ‘ä»¬åœ¨å®ä¾‹è¢«æ¸²æŸ“ åˆ°DOMä¹‹å‰æ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚ç”±äºDOMè¿˜æœªå°±ç»ªï¼Œåœ¨åˆå§‹åŒ–é’©å­é‡Œï¼Œä¸èƒ½è®¿é—®DOM å¯¹è±¡ï¼Œå®ä¾‹çš„$elå±æ€§ â€”â€” å®¿ä¸»DOMå¯¹è±¡ â€”â€” ä¹Ÿæ²¡æœ‰åˆ›å»º

beforeCreateæ˜¯æœ€æ—©è¢«è°ƒç”¨çš„é’©å­ï¼Œè¿™æ—¶Vue.jsè¿˜æ²¡æœ‰æ„é€ å“åº”å¼æ•°æ®æºï¼Œä¹Ÿæ²¡ æœ‰åˆå§‹åŒ–å®ä¾‹çš„äº‹ä»¶ã€‚

åœ¨createdé’©å­é‡Œï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®å“åº”å¼æ•°æ®ã€ç›‘å¬å®ä¾‹äº‹ä»¶ã€‚ä¸è¿‡è¿˜æ²¡æœ‰å°†è™šæ‹Ÿ DOMæ¸²æŸ“åˆ°æ–‡æ¡£DOMæ ‘ã€‚

createé’©å­ç”¨æ³•

created é’©å­å¯ä»¥ç”¨æ¥åœ¨ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºä¹‹åæ‰§è¡Œä»£ç ï¼š

new Vue({
  data: {
    a: 1
  },
  created: function () {
    // `this` æŒ‡å‘ vm å®ä¾‹
    console.log('a is: ' + this.a)
  }
})
// => "a is: 1"
DOMæŒ‚è½½é’©å­

æŒ‚è½½é’©å­åŒ…æ‹¬beforeMountå’Œmountedï¼Œæ˜¯æœ€å¸¸ä½¿ç”¨çš„é’©å­ã€‚è¿™ä¸¤ä¸ªé’©å­å…è®¸æˆ‘ä»¬ åœ¨é¦–æ¬¡æ¸²æŸ“*å‰åç«‹å³è®¿é—®Vueå®ä¾‹ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦åœ¨é¦–æ¬¡æ¸²æŸ“å‰åè®¿é—®æˆ–ä¿®æ”¹ DOMå¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡å®ä¾‹çš„$elå±æ€§è®¿é—®å®¿ä¸»å…ƒç´ ï¼‰ï¼Œå°±åº”è¯¥ä½¿ç”¨è¿™ä¸¤ä¸ªé’©å­

beforeMounté’©å­åœ¨æ¨¡æ¿ç¼–è¯‘å®Œæˆåã€é¦–æ¬¡æ¸²æŸ“å‰æ‰§è¡Œã€‚

åœ¨mountedé’©å­å†…å¯ä»¥è‡ªç”±åœ°è®¿é—®ç»„ä»¶æ¸²æŸ“åçš„DOMå¯¹è±¡ï¼ˆthis.$elï¼‰ã€‚è¿™ä¸ªé’©å­ ç»å¸¸è¢«ç”¨äºä¿®æ”¹DOMã€é›†æˆç¬¬ä¸‰æ–¹åº“ç­‰æ“ä½œã€‚

æ›´æ–°é’©å­

æ›´æ–°é’©å­åŒ…æ‹¬beforeUpdateå’Œupdatedã€‚æ¯å½“å®ä¾‹éœ€è¦é‡æ–°æ¸²æŸ“ï¼ˆä¾‹å¦‚æ¨¡å‹å‘ç”Ÿå˜åŒ–ç­‰ï¼‰ï¼Œ æ¡†æ¶å°±ä¼šè°ƒç”¨è¿™ä¸¤ä¸ªé’©å­

beforeUpdateé’©å­åœ¨æ¨¡å‹æ•°æ®å˜åŒ–ä¹‹åã€æ¸²æŸ“å‘¨æœŸå¼€å§‹ä¹‹å‰æ‰§è¡Œã€‚åœ¨è¿™ä¸ªé’©å­é‡Œæˆ‘ä»¬å¯ä»¥ åœ¨ç•Œé¢æ¸²æŸ“å‰è·å–å®ä¾‹å±æ€§çš„æœ€æ–°å€¼ã€‚

updatedé’©å­åœ¨é‡æ–°æ¸²æŸ“å®Œæˆåè¢«è°ƒç”¨ã€‚

DOMå¸è½½é’©å­

DOMå¸è½½é’©å­åŒ…æ‹¬beforeDestroyå’Œdestroyedï¼Œå½“å®ä¾‹è¢«ä»DOMæ ‘ç§»é™¤æ—¶æ‰§è¡Œã€‚ è¿™ä¸¤ä¸ªé’©å­å…è®¸æˆ‘ä»¬åœ¨å®ä¾‹é”€æ¯å‰åæ‰§è¡Œä¸€äº›æ¸…ç†æˆ–ç»Ÿè®¡åˆ†æçš„å·¥ä½œ

beforeDestroyé’©å­åœ¨å®ä¾‹è¢«é”€æ¯ï¼ˆåˆ©ç”¨ï¼Œé€šè¿‡è°ƒç”¨å®ä¾‹çš„$destroy()æ–¹æ³•ï¼‰ä¹‹å‰è¢«è°ƒç”¨ã€‚ åœ¨è¿™ä¸ªé’©å­é‡Œå¯ä»¥æ¸…ç†å¯¹å“åº”å¼æ•°æ®çš„ç›‘å¬ã€‚

destroyedé’©å­åœ¨å®ä¾‹è¢«é”€æ¯ä¹‹åè¢«è°ƒç”¨ï¼Œæ­¤æ—¶å®ä¾‹å·²ç»ä¸å‰©ä»€ä¹ˆä¸œè¥¿äº†:-( ä¹Ÿå¯ä»¥ åœ¨è¿™ä¸ªé’©å­é‡Œæ‰§è¡Œä¸€äº›æœ€åæ—¶åˆ»çš„æ¸…ç†å·¥ä½œï¼Œæˆ–è€…å‘è¿œç¨‹æœåŠ¡å™¨é€šçŸ¥å®ä¾‹è¢«é”€æ¯çš„æ¶ˆæ¯

æ¨¡æ¿è¯­æ³•

æ–‡æœ¬ ä¸ v-once


<span>Message: {{ msg }}</span>

é€šè¿‡ä½¿ç”¨ v-once æŒ‡ä»¤ï¼Œä½ ä¹Ÿèƒ½æ‰§è¡Œä¸€æ¬¡æ€§åœ°æ’å€¼ï¼Œå½“æ•°æ®æ”¹å˜æ—¶ï¼Œæ’å€¼å¤„çš„å†…å®¹ä¸ä¼šæ›´æ–°ã€‚


<span v-once>è¿™ä¸ªå°†ä¸ä¼šæ”¹å˜: {{ msg }}</span>
åŸå§‹html ä¸ v-html

v-htmlèƒ½æŠŠå€¼è§£é‡Šæˆä¸ºhtml

<p>Using mustaches: {{ rawHtml }}</p>
<p>Using v-html directive: <span v-html="rawHtml"></span></p>

ä½¿ç”¨JSè¡¨è¾¾å¼

{{ number + 1 }}
{{ ok ? 'YES' : 'NO' }}
{{ message.split('').reverse().join('') }}
<div v-bind:id="'list-' + id"></div>
æŒ‡ä»¤ v- ä¸ ç¼©å†™

v-if:


<p v-if="seen">ç°åœ¨ä½ çœ‹åˆ°æˆ‘äº†</p>
è¿™é‡Œï¼Œv-if æŒ‡ä»¤å°†æ ¹æ®è¡¨è¾¾å¼ seen çš„å€¼çš„çœŸå‡æ¥æ’å…¥/ç§»é™¤ p å…ƒç´ ã€‚

v-on:

<!-- å®Œæ•´è¯­æ³• -->
<a v-on:click="doSomething">...</a>

<!-- ç¼©å†™ -->
<a @click="doSomething">...</a>
v-bindç¼©å†™

<!-- å®Œæ•´è¯­æ³• -->
<a v-bind:href="url">...</a>

<!-- ç¼©å†™ -->
<a :href="url">...</a>
è®¡ç®—å±æ€§å’Œä¾¦å¬å™¨

è®¡ç®—å±æ€§ç¼“å­˜ vs æ–¹æ³•ï¼Œè®¡ç®—å±æ€§æ˜¯åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–è¿›è¡Œç¼“å­˜çš„ã€‚åªåœ¨ç›¸å…³å“åº”å¼ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶å®ƒä»¬æ‰ä¼šé‡æ–°æ±‚å€¼ã€‚è¿™å°±æ„å‘³ç€åªè¦ message è¿˜æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå¤šæ¬¡è®¿é—® reversedMessage è®¡ç®—å±æ€§ä¼šç«‹å³è¿”å›ä¹‹å‰çš„è®¡ç®—ç»“æœï¼Œè€Œä¸å¿…å†æ¬¡æ‰§è¡Œå‡½æ•°ã€‚

è®¡ç®—å±æ€§ computed

# html
<div id="example">
  <p>Original message: "{{ message }}"</p>
  <p>Computed reversed message: "{{ reversedMessage }}"</p>
</div>

# js
var vm = new Vue({
  el: '#example',
  data: {
    message: 'Hello'
  },
  computed: {
    // è®¡ç®—å±æ€§çš„ getter
    reversedMessage: function () {
      // `this` æŒ‡å‘ vm å®ä¾‹
      return this.message.split('').reverse().join('')
    }
  }
})

è®¡ç®—å±æ€§é»˜è®¤åªæœ‰ getter ï¼Œä¸è¿‡åœ¨éœ€è¦æ—¶ä½ ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª setter ï¼š

computed: {
  fullName: {
    // getter
    get: function () {
      return this.firstName + ' ' + this.lastName
    },
    // setter
    set: function (newValue) {
      var names = newValue.split(' ')
      this.firstName = names[0]
      this.lastName = names[names.length - 1]
    }
  }
}

ä¾¦å¬å™¨ watch

#html
<div id="watch-example">
  <p>
    Ask a yes/no question:
    <input v-model="question">
  </p>
  <p>{{ answer }}</p>
</div>

#js
<!-- å› ä¸º AJAX åº“å’Œé€šç”¨å·¥å…·çš„ç”Ÿæ€å·²ç»ç›¸å½“ä¸°å¯Œï¼ŒVue æ ¸å¿ƒä»£ç æ²¡æœ‰é‡å¤ -->
<!-- æä¾›è¿™äº›åŠŸèƒ½ä»¥ä¿æŒç²¾ç®€ã€‚è¿™ä¹Ÿå¯ä»¥è®©ä½ è‡ªç”±é€‰æ‹©è‡ªå·±æ›´ç†Ÿæ‚‰çš„å·¥å…·ã€‚ -->
<script src="https://cdn.jsdelivr.net/npm/axios@0.12.0/dist/axios.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.13.1/lodash.min.js"></script>
<script>
var watchExampleVM = new Vue({
  el: '#watch-example',
  data: {
    question: '',
    answer: 'I cannot give you an answer until you ask a question!'
  },
  watch: {
    // å¦‚æœ `question` å‘ç”Ÿæ”¹å˜ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šè¿è¡Œ
    question: function (newQuestion, oldQuestion) {
      this.answer = 'Waiting for you to stop typing...'
      this.debouncedGetAnswer()
    }
  },
  created: function () {
    // `_.debounce` æ˜¯ä¸€ä¸ªé€šè¿‡ Lodash é™åˆ¶æ“ä½œé¢‘ç‡çš„å‡½æ•°ã€‚
    // åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›é™åˆ¶è®¿é—® yesno.wtf/api çš„é¢‘ç‡
    // AJAX è¯·æ±‚ç›´åˆ°ç”¨æˆ·è¾“å…¥å®Œæ¯•æ‰ä¼šå‘å‡ºã€‚æƒ³è¦äº†è§£æ›´å¤šå…³äº
    // `_.debounce` å‡½æ•° (åŠå…¶è¿‘äº² `_.throttle`) çš„çŸ¥è¯†ï¼Œ
    // è¯·å‚è€ƒï¼šhttps://lodash.com/docs#debounce
    this.debouncedGetAnswer = _.debounce(this.getAnswer, 500)
  },
  methods: {
    getAnswer: function () {
      if (this.question.indexOf('?') === -1) {
        this.answer = 'Questions usually contain a question mark. ;-)'
        return
      }
      this.answer = 'Thinking...'
      var vm = this
      axios.get('https://yesno.wtf/api')
        .then(function (response) {
          vm.answer = _.capitalize(response.data.answer)
        })
        .catch(function (error) {
          vm.answer = 'Error! Could not reach the API. ' + error
        })
    }
  }
})
</script>

ç»‘å®š HTML Class

ä½¿ç”¨dataç»‘å®š

<div v-bind:class="classObject"></div>
data: {
  classObject: {
    active: true,
    'text-danger': false
  }
}

æˆ–è€…ä½¿ç”¨è®¡ç®—å±æ€§


<div v-bind:class="classObject"></div>
data: {
  isActive: true,
  error: null
},
computed: {
  classObject: function () {
    return {
      active: this.isActive && !this.error,
      'text-danger': this.error && this.error.type === 'fatal'
    }
  }
}

åˆ©ç”¨ç»„ä»¶ç»‘å®šclassï¼š


ç”³æ˜ç»„ä»¶ï¼šï¼ˆæ³¨æ„ï¼Œåœ¨ä½¿ç”¨ç»„ä»¶çš„æ—¶å€™è¦æ·»åŠ çš„classä¹Ÿä¼šæ¸²æŸ“ï¼‰
Vue.component('my-component', {
  template: '<p class="foo bar">Hi</p>'
})

ç„¶ååœ¨ä½¿ç”¨å®ƒçš„æ—¶å€™æ·»åŠ ä¸€äº› classï¼š
<my-component class="baz boo"></my-component>
æˆ–
<my-component v-bind:class="{ active: isActive }"></my-component>

HTML å°†è¢«æ¸²æŸ“ä¸º:
<p class="foo bar baz boo">Hi</p>
ç»‘å®šstyle v-bind:style


<div v-bind:style="styleObject"></div>
data: {
  styleObject: {
    color: 'red',
    fontSize: '13px'
  }
}
æˆ–æ•°ç»„
<div v-bind:style="[baseStyles, overridingStyles]"></div>
æ¡ä»¶æ¸²æŸ“ v-if ä¸ v-else


<h1 v-if="awesome">Vue is awesome!</h1>
<h1 v-else>Oh no ğŸ˜¢</h1>
æˆ–å½“åšåŒ…è£¹å…ƒç´ 
<template v-if="ok">
  <h1>Title</h1>
  <p>Paragraph 1</p>
  <p>Paragraph 2</p>
</template>
ä½ å¯ä»¥ä½¿ç”¨ v-else æŒ‡ä»¤æ¥è¡¨ç¤º v-if çš„â€œelse å—â€ã€‚v-else å…ƒç´ å¿…é¡»ç´§è·Ÿåœ¨å¸¦ v-if æˆ–è€… v-else-if çš„å…ƒç´ çš„åé¢ï¼Œå¦åˆ™å®ƒå°†ä¸ä¼šè¢«è¯†åˆ«ã€‚


<div v-if="Math.random() > 0.5">
  Now you see me
</div>
<div v-else>
  Now you don't
</div>
v-else-if


<div v-if="type === 'A'">
  A
</div>
<div v-else-if="type === 'B'">
  B
</div>
<div v-else-if="type === 'C'">
  C
</div>
<div v-else>
  Not A/B/C
</div>
Vue ä¸ºä½ æä¾›äº†ä¸€ç§æ–¹å¼æ¥è¡¨è¾¾â€œè¿™ä¸¤ä¸ªå…ƒç´ æ˜¯å®Œå…¨ç‹¬ç«‹çš„ï¼Œä¸è¦å¤ç”¨å®ƒä»¬â€ã€‚åªéœ€æ·»åŠ ä¸€ä¸ªå…·æœ‰å”¯ä¸€å€¼çš„ key å±æ€§å³å¯ï¼š


<template v-if="loginType === 'username'">
  <label>Username</label>
  <input placeholder="Enter your username" key="username-input">
</template>
<template v-else>
  <label>Email</label>
  <input placeholder="Enter your email address" key="email-input">
</template>
v-show

å¦ä¸€ä¸ªç”¨äºæ ¹æ®æ¡ä»¶å±•ç¤ºå…ƒç´ çš„é€‰é¡¹æ˜¯ v-show æŒ‡ä»¤ã€‚ç”¨æ³•å¤§è‡´ä¸€æ ·ã€‚ä¸åŒçš„æ˜¯å¸¦æœ‰ v-show çš„å…ƒç´ å§‹ç»ˆä¼šè¢«æ¸²æŸ“å¹¶ä¿ç•™åœ¨ DOM ä¸­ã€‚v-show åªæ˜¯ç®€å•åœ°åˆ‡æ¢å…ƒç´ çš„ CSS å±æ€§ displayã€‚


<h1 v-show="ok">Hello!</h1>
ä¸€èˆ¬æ¥è¯´ï¼Œv-if æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œè€Œ v-show æœ‰æ›´é«˜çš„åˆå§‹æ¸²æŸ“å¼€é”€ã€‚å› æ­¤ï¼Œå¦‚æœéœ€è¦éå¸¸é¢‘ç¹åœ°åˆ‡æ¢ï¼Œåˆ™ä½¿ç”¨ v-show è¾ƒå¥½ï¼›å¦‚æœåœ¨è¿è¡Œæ—¶æ¡ä»¶å¾ˆå°‘æ”¹å˜ï¼Œåˆ™ä½¿ç”¨ v-if è¾ƒå¥½ã€‚

v-for åˆ—è¡¨æ¸²æŸ“

åœ¨ v-for å—ä¸­ï¼Œæˆ‘ä»¬æ‹¥æœ‰å¯¹çˆ¶ä½œç”¨åŸŸå±æ€§çš„å®Œå…¨è®¿é—®æƒé™ã€‚v-for è¿˜æ”¯æŒä¸€ä¸ªå¯é€‰çš„ç¬¬äºŒä¸ªå‚æ•°ä¸ºå½“å‰é¡¹çš„ç´¢å¼•ã€‚


<ul id="example-2">
  <li v-for="(item, index) in items">
    {{ parentMessage }} - {{ index }} - {{ item.message }}
  </li>
</ul>
var example2 = new Vue({
  el: '#example-2',
  data: {
    parentMessage: 'Parent',
    items: [
      { message: 'Foo' },
      { message: 'Bar' }
    ]
  }
})

å¯ä»¥æä¾›ç¬¬äºŒä¸ªçš„å‚æ•°ä¸ºé”®å,ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºç´¢å¼•:


<div id="app">
  <ul>
    <li v-for="(value,key,index) in obj">{{key}} - {{index}} - {{value}}</li>
  </ul>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      obj: {
        message1: 'hello vue111',
        message2: 'hello vue222',
        message3: 'hello vue333',
      }
    }
  })
</script>

ç»„ä»¶æ›´æ–°çš„å‡ ç§æ–¹å¼

// Vue.set
Vue.set(vm.items, indexOfItem, newValue)

// Array.prototype.splice
vm.items.splice(indexOfItem, 1, newValue)

// ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ vm.$set å®ä¾‹æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯å…¨å±€æ–¹æ³• Vue.set çš„ä¸€ä¸ªåˆ«åï¼š
vm.$set(vm.items, indexOfItem, newValue)

// new length
vm.items.splice(newLength)
Vue åŒ…å«ä¸€ç»„è§‚å¯Ÿæ•°ç»„çš„å˜å¼‚æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒä»¬ä¹Ÿå°†ä¼šè§¦å‘è§†å›¾æ›´æ–°ã€‚è¿™äº›æ–¹æ³•å¦‚ä¸‹ï¼š


push()
pop()
shift()
unshift()
splice()
sort()
reverse()

#ä½ æ‰“å¼€æ§åˆ¶å°ï¼Œç„¶åç”¨å‰é¢ä¾‹å­çš„ items æ•°ç»„è°ƒç”¨å˜å¼‚æ–¹æ³•ï¼šexample1.items.push({ message: 'Baz' }) ã€‚
å˜å¼‚æ–¹æ³• (mutation method)ï¼Œé¡¾åæ€ä¹‰ï¼Œä¼šæ”¹å˜è¢«è¿™äº›æ–¹æ³•è°ƒç”¨çš„åŸå§‹æ•°ç»„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¹Ÿæœ‰éå˜å¼‚ (non-mutating method) æ–¹æ³•ï¼Œä¾‹å¦‚ï¼šfilter(), concat() å’Œ slice() ã€‚è¿™äº›ä¸ä¼šæ”¹å˜åŸå§‹æ•°ç»„ï¼Œä½†æ€»æ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚å½“ä½¿ç”¨éå˜å¼‚æ–¹æ³•æ—¶ï¼Œå¯ä»¥ç”¨æ–°æ•°ç»„æ›¿æ¢æ—§æ•°ç»„ï¼š


example1.items = example1.items.filter(function (item) {
  return item.message.match(/Foo/)
})
ä½ å¯èƒ½è®¤ä¸ºè¿™å°†å¯¼è‡´ Vue ä¸¢å¼ƒç°æœ‰ DOM å¹¶é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ã€‚å¹¸è¿çš„æ˜¯ï¼Œäº‹å®å¹¶éå¦‚æ­¤ã€‚Vue ä¸ºäº†ä½¿å¾— DOM å…ƒç´ å¾—åˆ°æœ€å¤§èŒƒå›´çš„é‡ç”¨è€Œå®ç°äº†ä¸€äº›æ™ºèƒ½çš„ã€å¯å‘å¼çš„æ–¹æ³•ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªå«æœ‰ç›¸åŒå…ƒç´ çš„æ•°ç»„å»æ›¿æ¢åŸæ¥çš„æ•°ç»„æ˜¯éå¸¸é«˜æ•ˆçš„æ“ä½œã€‚

å¯¹äºå·²ç»åˆ›å»ºçš„å®ä¾‹ï¼ŒVue ä¸èƒ½åŠ¨æ€æ·»åŠ æ ¹çº§åˆ«çš„å“åº”å¼å±æ€§ã€‚ä½†æ˜¯ï¼Œå¯ä»¥ä½¿ç”¨ Vue.set(object, key, value) æ–¹æ³•å‘åµŒå¥—å¯¹è±¡æ·»åŠ å“åº”å¼å±æ€§ã€‚ä¾‹å¦‚ï¼Œå¯¹äºï¼š

var vm = new Vue({
  data: {
    userProfile: {
      name: 'Anika'
    }
  }
})

ä½ å¯ä»¥æ·»åŠ ä¸€ä¸ªæ–°çš„ age å±æ€§åˆ°åµŒå¥—çš„ userProfile å¯¹è±¡ï¼š
Vue.set(vm.userProfile, 'age', 27)

ä½ è¿˜å¯ä»¥ä½¿ç”¨ vm.$set å®ä¾‹æ–¹æ³•ï¼Œå®ƒåªæ˜¯å…¨å±€ Vue.set çš„åˆ«åï¼š
vm.$set(vm.userProfile, 'age', 27)
æ˜¾ç¤ºã€è¿‡æ»¤

<li v-for="n in evenNumbers">{{ n }}</li>
data: {
  numbers: [ 1, 2, 3, 4, 5 ]
},
computed: {
  evenNumbers: function () {
    return this.numbers.filter(function (number) {
      return number % 2 === 0
    })
  }
}

åœ¨è®¡ç®—å±æ€§ä¸é€‚ç”¨çš„æƒ…å†µä¸‹ (ä¾‹å¦‚ï¼Œåœ¨åµŒå¥— v-for å¾ªç¯ä¸­) ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª method æ–¹æ³•ï¼š

<li v-for="n in even(numbers)">{{ n }}</li>
data: {
  numbers: [ 1, 2, 3, 4, 5 ]
},
methods: {
  even: function (numbers) {
    return numbers.filter(function (number) {
      return number % 2 === 0
    })
  }
}

v-for ä¹Ÿå¯ä»¥å–æ•´æ•°

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°†é‡å¤å¤šæ¬¡æ¨¡æ¿ã€‚


<div>
  <span v-for="n in 10">{{ n }} </span>
</div>

ç”¨template

<div id="app">
  <ul>
    // ç”¨templateä»£æ›¿ li ä¸­çš„ v-for å±æ€§
    <!-- <li v-for="(value,key,index) in obj">{{key}} - {{index}} - {{value}}</li> -->
    <template v-for="(value,key,index) in obj">
      <li>{{key}} - {{index}} - {{value}}</li>
    </template>
  </ul>
</div>
<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      obj: {
        message1: 'hello vue111',
        message2: 'hello vue222',
        message3: 'hello vue333',
      }
    }
  })


ç¤ºä¾‹ï¼š

<div id="todo-list-example">
  <form v-on:submit.prevent="addNewTodo">
    <label for="new-todo">Add a todo</label>
    <input
      v-model="newTodoText"
      id="new-todo"
      placeholder="E.g. Feed the cat"
    >
    <button>Add</button>
  </form>
  <ul>
    <li
      is="todo-item"
      v-for="(todo, index) in todos"
      v-bind:key="todo.id"
      v-bind:title="todo.title"
      v-on:remove="todos.splice(index, 1)"
    ></li>
  </ul>
</div>
#æ³¨æ„è¿™é‡Œçš„ is="todo-item" å±æ€§ã€‚è¿™ç§åšæ³•åœ¨ä½¿ç”¨ DOM æ¨¡æ¿æ—¶æ˜¯ååˆ†å¿…è¦çš„ï¼Œå› ä¸ºåœ¨ <ul> å…ƒç´ å†…åªæœ‰ <li> å…ƒç´ ä¼šè¢«çœ‹ä½œæœ‰æ•ˆå†…å®¹ã€‚è¿™æ ·åšå®ç°çš„æ•ˆæœä¸ <todo-item> ç›¸åŒï¼Œä½†æ˜¯å¯ä»¥é¿å¼€ä¸€äº›æ½œåœ¨çš„æµè§ˆå™¨è§£æé”™è¯¯ã€‚æŸ¥çœ‹ DOM æ¨¡æ¿è§£æè¯´æ˜ æ¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚

Vue.component('todo-item', {
  template: '\
    <li>\
      {{ title }}\
      <button v-on:click="$emit(\'remove\')">Remove</button>\
    </li>\
  ',
  props: ['title']
})

new Vue({
  el: '#todo-list-example',
  data: {
    newTodoText: '',
    todos: [
      {
        id: 1,
        title: 'Do the dishes',
      },
      {
        id: 2,
        title: 'Take out the trash',
      },
      {
        id: 3,
        title: 'Mow the lawn'
      }
    ],
    nextTodoId: 4
  },
  methods: {
    addNewTodo: function () {
      this.todos.push({
        id: this.nextTodoId++,
        title: this.newTodoText
      })
      this.newTodoText = ''
    }
  }
})

è¡¨å•è¾“å…¥ç»‘å®š

input ä¸ textarea

<div id="app">
  <!-- inputç»‘å®š -->
  <input v-model="message" placeholder="edit me"><br>
  <p>Message is: {{ message }}</p><br>

  <!-- textareaç»‘å®š -->
  <textarea v-model="message" placeholder="add multiple lines"></textarea><br>

  <!-- chechkboxç»‘å®š -->
  <input type="checkbox" id="checkbox" v-model="checked">
  <label for="checkbox">{{ checked }}</label><br>
</div>

<script type="text/javascript">
  var vm = new Vue({
    el: '#app',
    data: {
      message: 'hello vue',
      checked: 'ture'
    }
  })
</script>

å¤é€‰æ¡† checkbox

<div id='example-3'>
  <input type="checkbox" id="jack" value="Jack" v-model="checkedNames">
  <label for="jack">Jack</label>
  <input type="checkbox" id="john" value="John" v-model="checkedNames">
  <label for="john">John</label>
  <input type="checkbox" id="mike" value="Mike" v-model="checkedNames">
  <label for="mike">Mike</label>
  <br>
  <span>Checked names: {{ checkedNames }}</span>
</div>

<script type="text/javascript">
  new Vue({
    el: '#example-3',
    data: {
      checkedNames: []
    }
  })
</script>

å•é€‰æ¡† radio

<div id="example-4">
  <input type="radio" id="one" value="One" v-model="picked">
  <label for="one">One</label>
  <br>
  <input type="radio" id="two" value="Two" v-model="picked">
  <label for="two">Two</label>
  <br>
  <span>Picked: {{ picked }}</span>
</div>

<script type="text/javascript">
  new Vue({
    el: '#example-4',
    data: {
      picked: ''
    }
  })
</script>

é€‰æ‹©æ¡† select å•é€‰

<div id="example-5">
  <select v-model="selected">
    <option disabled value="">è¯·é€‰æ‹©</option>
    <option>A</option>
    <option>B</option>
    <option>C</option>
  </select>
  <span>Selected: {{ selected }}</span>
</div>

<script type="text/javascript">
  new Vue({
    el: '#example-5',
    data: {
      selected: ''
    }
  })
</script>

é€‰æ‹©æ¡† select å¤šé€‰

ç»‘å®šåˆ°æ•°ç»„
<div id="example-6">
  <select v-model="selected" multiple style="width: 50px;">
    <option>A</option>
    <option>B</option>
    <option>C</option>
  </select>
  <br>
  <span>Selected: {{ selected }}</span>
</div>
new Vue({
  el: '#example-6',
  data: {
    selected: []
  }
})
ä¿®é¥°ç¬¦

.lazy

åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œv-model åœ¨æ¯æ¬¡ input äº‹ä»¶è§¦å‘åå°†è¾“å…¥æ¡†çš„å€¼ä¸æ•°æ®è¿›è¡ŒåŒæ­¥ (é™¤äº†ä¸Šè¿°è¾“å…¥æ³•ç»„åˆæ–‡å­—æ—¶)ã€‚ä½ å¯ä»¥æ·»åŠ  lazy ä¿®é¥°ç¬¦ï¼Œä»è€Œè½¬å˜ä¸ºä½¿ç”¨ change äº‹ä»¶è¿›è¡ŒåŒæ­¥ï¼š

<!-- åœ¨â€œchangeâ€æ—¶è€Œéâ€œinputâ€æ—¶æ›´æ–° -->
<input v-model.lazy="msg" >
.number

å¦‚æœæƒ³è‡ªåŠ¨å°†ç”¨æˆ·çš„è¾“å…¥å€¼è½¬ä¸ºæ•°å€¼ç±»å‹ï¼Œå¯ä»¥ç»™ v-model æ·»åŠ  number ä¿®é¥°ç¬¦ï¼š


<input v-model.number="age" type="number">
è¿™é€šå¸¸å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå³ä½¿åœ¨ type=â€numberâ€ æ—¶ï¼ŒHTML è¾“å…¥å…ƒç´ çš„å€¼ä¹Ÿæ€»ä¼šè¿”å›å­—ç¬¦ä¸²ã€‚å¦‚æœè¿™ä¸ªå€¼æ— æ³•è¢« parseFloat() è§£æï¼Œåˆ™ä¼šè¿”å›åŸå§‹çš„å€¼ã€‚

.trim

å¦‚æœè¦è‡ªåŠ¨è¿‡æ»¤ç”¨æˆ·è¾“å…¥çš„é¦–å°¾ç©ºç™½å­—ç¬¦ï¼Œå¯ä»¥ç»™ v-model æ·»åŠ  trim ä¿®é¥°ç¬¦ï¼š


<input v-model.trim="msg">
ç»„ä»¶

ç»„ä»¶å¤ç”¨å±æ€§


<div id="components-demo">
  <button-counter></button-counter>
  <button-counter></button-counter>
  <button-counter></button-counter>
</div>
ç»„ä»¶çš„data

ä¸€ä¸ªç»„ä»¶çš„ data é€‰é¡¹å¿…é¡»æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå› æ­¤æ¯ä¸ªå®ä¾‹å¯ä»¥ç»´æŠ¤ä¸€ä»½è¢«è¿”å›å¯¹è±¡çš„ç‹¬ç«‹çš„æ‹·è´ï¼š

data: function () {
  return {
    count: 0
  }
}
å¦‚æœ Vue æ²¡æœ‰è¿™æ¡è§„åˆ™ï¼Œç‚¹å‡»ä¸€ä¸ªæŒ‰é’®å°±å¯èƒ½ä¼šå½±å“åˆ°å…¶å®ƒæ‰€æœ‰å®ä¾‹

é€šè¿‡ Prop å‘å­ç»„ä»¶ä¼ é€’æ•°æ®


Vue.component('blog-post', {
  props: ['title'],
  template: '<h3>{{ title }}</h3>'
})

<blog-post title="My journey with Vue"></blog-post>
<blog-post title="Blogging with Vue"></blog-post>
<blog-post title="Why Vue is so fun"></blog-post>

ç»„ä»¶ç¤ºä¾‹


<div id="blog-post-demo">
  <blog-post v-for="post in posts" v-bind:key="post.id" v-bind:post="post"></blog-post>
</div>

<script type="text/javascript">
  Vue.component('blog-post', {
    props: ['post'],
    template: '<div class="blog-post">\
            <h3>{{ post.title }}</h3>\
            <div v-html="post.content"></div>\
          </div>'
  })

  new Vue({
    el: '#blog-post-demo',
    data: {
      posts: [{
          id: 1,
          title: 'My journey with Vue'
        },
        {
          id: 2,
          title: 'Blogging with Vue'
        },
        {
          id: 3,
          title: 'Why Vue is so fun'
        }
      ]
    }
  })
</script>
$emitï¼Œè§¦å‘äº‹ä»¶enlarge-textï¼Œenlarge-textäº‹ä»¶ç»‘å®šä¸ºpostFontSize += 0.1


<div id="blog-posts-events-demo" class="demo">
  <div :style="{ fontSize: postFontSize + 'em' }">
    <blog-post v-for="post in posts" v-bind:key="post.id" v-bind:post="post" v-on:enlarge-text="postFontSize += 0.1"></blog-post>
  </div>
</div>

<script>
Vue.component('blog-post', {
  props: ['post'],
  template: '\
    <div class="blog-post">\
      <h3>{{ post.title }}</h3>\
      <button v-on:click="$emit(\'enlarge-text\')">\
        Enlarge text\
      </button>\
      <div v-html="post.content"></div>\
    </div>\
  '
})
new Vue({
  el: '#blog-posts-events-demo',
  data: {
    posts: [
      { id: 1, title: 'My journey with Vue', content: '...content...' },
      { id: 2, title: 'Blogging with Vue', content: '...content...' },
      { id: 3, title: 'Why Vue is so fun', content: '...content...' }
    ],
    postFontSize: 1
  }
})
</script>
$emitï¼Œäº‹ä»¶æŠ›å‡ºä¸€ä¸ªå€¼
ç”¨$eventè®¿é—®è¿™ä¸ªå€¼


<button v-on:click="$emit('enlarge-text', 0.1)">
  Enlarge text
</button>

<blog-post
  ...
  v-on:enlarge-text="postFontSize += $event"
></blog-post>
æˆ–è€…ä½¿ç”¨å‡½æ•°å¤„ç†


<blog-post
  ...
  v-on:enlarge-text="onEnlargeText"
></blog-post>

//é‚£ä¹ˆè¿™ä¸ªå€¼å°†ä¼šä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥è¿™ä¸ªæ–¹æ³•
methods: {
  onEnlargeText: function (enlargeAmount) {
    this.postFontSize += enlargeAmount
  }
}
inputäº‹ä»¶ç»„ä»¶

Vue.component('custom-input', {
  props: ['value'],
  template: `
    <input
      v-bind:value="value"
      v-on:input="$emit('input', $event.target.value)"
    >
  `
})

<custom-input v-model="searchText"></custom-input>
slotæ’æ§½

æ’æ§½å¯ä»¥ä¿ç•™ your profile çš„å€¼


å®ƒå…è®¸ä½ åƒè¿™æ ·åˆæˆç»„ä»¶ï¼š
<navigation-link url="/profile">
  Your Profile
</navigation-link>

ç„¶åä½ åœ¨ <navigation-link> çš„æ¨¡æ¿ä¸­å¯èƒ½ä¼šå†™ä¸ºï¼š
<a
  v-bind:href="url"
  class="nav-link"
>
  <slot></slot>
</a>

å½“ç»„ä»¶æ¸²æŸ“çš„æ—¶å€™ï¼Œ<slot></slot> å°†ä¼šè¢«æ›¿æ¢ä¸ºâ€œYour Profileâ€ã€‚
åŠ¨æ€ç»„ä»¶

å¯ä»¥é€šè¿‡ Vue çš„ component å…ƒç´ åŠ ä¸€ä¸ªç‰¹æ®Šçš„ is ç‰¹æ€§æ¥å®ç°

<div id="dynamic-component-demo" class="demo">
  <button v-for="tab in tabs" v-bind:key="tab" class="dynamic-component-demo-tab-button" v-bind:class="{ 'dynamic-component-demo-tab-button-active': tab === currentTab }" v-on:click="currentTab = tab">
    {{ tab }}
  </button>
  <component v-bind:is="currentTabComponent" class="dynamic-component-demo-tab"></component>
</div>

<script>
Vue.component('tab-home', { template: '<div>Home component</div>' })
Vue.component('tab-posts', { template: '<div>Posts component</div>' })
Vue.component('tab-archive', { template: '<div>Archive component</div>' })
new Vue({
  el: '#dynamic-component-demo',
  data: {
    currentTab: 'Home',
    tabs: ['Home', 'Posts', 'Archive']
  },
  computed: {
    currentTabComponent: function () {
      return 'tab-' + this.currentTab.toLowerCase()
    }
  }
})
</script>
VUE äº‹ä»¶å¤„ç†

ç›‘å¬äº‹ä»¶ v-on:click


<button v-on:click='method1'>
<button v-on:click='say('hi')'>
ç‰¹æ®Šå˜é‡ $event


<button v-on:click='method2('hi', $event)'>
method2: function (message, event){
    if(event)
        //å¯ä»¥è®¿é—®åŸç”Ÿçš„äº‹ä»¶å¯¹è±¡
        event.preventDefault()
}

event.preventDefault() ä¸ event.stopPropagation()
äº‹ä»¶ä¿®é¥°ç¬¦

.stop
.prevent
.capture
.self
.once
.passive

æŒ‰é”®äº‹ä»¶ keyup keydown keypress

ä½¿ç”¨keycodeæˆ–è€…ä»¥ä¸‹
.enter
.tab
.delete
.esc
.space
.up
.down
.left
.right
.ctrl
.alt
.shift
.meta å¯¹åº”windowsé”®


<input type="submit" value="submit" v-on:keyup.up="onSubmit"/>

// alt + C
<input @keyup.alt.67="clear">

// click + ctrl
<input @click.ctrl="dosome">
VUEX

Vuexçš„ä½œç”¨ ï¼Œå°±åœ¨äºç®¡ç†ä¸€ä¸ªåº”ç”¨çš„çŠ¶æ€æ ‘ã€‚

åœ¨Vueå®ä¾‹çš„createdé’©å­ä¸­ï¼Œåº”ç”¨å¯åŠ¨äº†ä¸€ä¸ªå®šæ—¶å™¨ï¼Œç”¨æ¥å‘¨æœŸæ€§åœ° é€’å¢counterå±æ€§çš„å€¼ â€”â€” ç”±äºcounteræ˜¯å“åº”å¼å±æ€§ï¼Œå®ƒçš„å˜åŒ–å› è€Œ é©±åŠ¨äº†è§†å›¾éšä¹‹åˆ·æ–°ã€‚

å¯ä»¥è¯´counteræŠ½è±¡åœ°è¡¨è¾¾äº†è®¡æ•°å™¨è§†å›¾çš„æœ¬è´¨ç‰¹å¾ï¼Œå½“counterçš„ å€¼ç¡®å®šæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šåœ°æ¨ç†å‡ºè§†å›¾çš„è¡¨ç°ã€‚åƒcounterè¿™æ ·å¯ä»¥å†³å®š è§†å›¾è¡¨ç°çš„æ•°æ®ï¼Œåœ¨Vuexä¸­å°±è¢«ç§°ä¸ºçŠ¶æ€ã€‚

çŠ¶æ€æ ‘

åˆ›å»ºçŠ¶æ€åº“

Vuexçš„Storeç±» â€”â€” çŠ¶æ€åº“ â€”â€” ç”¨äºç®¡ç†çŠ¶æ€æ ‘ï¼Œå®ƒçš„å®ä¾‹åŒ–é…ç½®é¡¹state ç”¨æ¥å£°æ˜è¦åˆ›å»ºçš„çŠ¶æ€æ ‘ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåŒ…å«çŠ¶æ€counterçš„ çŠ¶æ€åº“ï¼š

const store = new Vuex.Store({
  state:{ counter:0 }
})
åˆ©ç”¨çŠ¶æ€åº“çš„stateå±æ€§ï¼Œå°±å¯ä»¥è®¿é—®åˆ°å…¶ç®¡ç†çš„çŠ¶æ€æ ‘äº†ã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ store.state.counteræ¥è®¿é—®counterçŠ¶æ€ã€‚

éœ€è¦æŒ‡å‡ºçš„æ˜¯ï¼ŒçŠ¶æ€åº“çš„stateå±æ€§ â€”â€” çŠ¶æ€æ ‘ â€”â€” æ˜¯ä¸€ä¸ªå“åº”å¼å±æ€§ï¼Œå› æ­¤ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨çŠ¶æ€æ ‘ä¸Šçš„è¿™äº›çŠ¶æ€æ¥é©±åŠ¨è§†å›¾çš„è‡ªåŠ¨æ›´æ–°ã€‚

ä½¿ç”¨è®¡ç®—å±æ€§è®¿é—®çŠ¶æ€æ ‘

åœ¨å»ºç«‹äº†å…¨åº”ç”¨å•ä¸€çŠ¶æ€æ ‘ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¦è€ƒè™‘çš„å°±æ˜¯åœ¨ç»„ä»¶ä¸­æ€ä¹ˆä½¿ç”¨ æ ‘ä¸Šçš„çŠ¶æ€äº† â€”â€” æˆ‘ä»¬å·²ç»å†³å®šä¸å£°æ˜ç»„ä»¶çš„ç§æœ‰çŠ¶æ€ã€‚

æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°†æ ‘ä¸Šçš„çŠ¶æ€ï¼Œæ˜ å°„ä¸ºç»„ä»¶çš„è®¡ç®—å±æ€§ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å°† çŠ¶æ€æ ‘ä¸Šçš„counterçŠ¶æ€ï¼Œæ˜ å°„ä¸ºç»„ä»¶çš„å¯è¯»å†™è®¡ç®—å±æ€§ï¼š


const EzCounter = {
  template:'<div class="counter">{{counter}}</div>',
  computed:{
    counter:{
      get() { return store.state.counter },
      set(v){ store.state.counter = v }
    }
  }
}
å°†çŠ¶æ€åº“æ³¨å…¥ç»„ä»¶

å¦ä¸€ç§æ–¹æ³•æ˜¯å°†çŠ¶æ€åº“æŒ‚æ¥ä¸ºVueå®ä¾‹çš„ä¸€ä¸ªå±æ€§ä¸Šï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­ ç›´æ¥è®¿é—®çŠ¶æ€æ ‘äº†ï¼ˆæ¨¡æ¿çš„ä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯æ‰€å±çš„Vueå®ä¾‹ï¼‰ã€‚

åœ¨åˆ›å»ºVueå®ä¾‹æ—¶ï¼Œä½¿ç”¨storeé…ç½®é¡¹ï¼Œå°±å¯ä»¥å°†çŠ¶æ€åº“æŒ‚æ¥ä¸ºVueå®ä¾‹ çš„å±æ€§$storeï¼Œè€Œä¸”è¿™ä¸ªVueå®ä¾‹çš„æ‰€æœ‰åä»£å®ä¾‹ï¼Œä¹Ÿéƒ½æœ‰$storeæŒ‡å‘ åŒä¸€ä¸ªçŠ¶æ€åº“ï¼Œçœ‹èµ·æ¥å°±åƒæ˜¯å°†çŠ¶æ€åº“æ³¨å…¥äº†ç»„ä»¶æ ‘ä¸Šçš„æ¯ä¸€ä¸ªå®ä¾‹ã€‚

ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ä½¿ç”¨storeé…ç½®é¡¹ï¼Œå°†çŠ¶æ€åº“storeæ³¨å…¥æ ¹ç»„ä»¶ï¼Œå› æ­¤ æˆ‘ä»¬å¯ä»¥åœ¨EzCounterç»„ä»¶ä¸­åˆ©ç”¨$storeå±æ€§è®¿é—®çŠ¶æ€åº“ï¼š

const EzCounter = { 
  template:'<div class="counter">{{$store.state.counter}}</div>'
}

new Vue({
  store:store,
  template:'<ez-counter/>',
  components:{EzCounter}
})
ç»„ä»¶ component é«˜çº§

ç»„ä»¶æ³¨å†Œâ€“å…¨å±€æ³¨å†Œ


// æ³¨å†Œ
Vue.component('my-component', {
template: '<div>A custom component!</div>'
})
// åˆ›å»ºæ ¹å®ä¾‹
new Vue({
el: '#example'
})

å…¨å±€æ³¨å†Œï¼šåœ¨æ‰€æœ‰å­ç»„ä»¶ä¸­ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸‰ä¸ªç»„ä»¶åœ¨å„è‡ªå†…éƒ¨ä¹Ÿéƒ½å¯ä»¥ç›¸äº’ä½¿ç”¨ã€‚

Vue.component('component-a', { /* ... */ })
Vue.component('component-b', { /* ... */ })
Vue.component('component-c', { /* ... */ })

new Vue({ el: '#app' })

<div id="app">
  <component-a></component-a>
  <component-b></component-b>
  <component-c></component-c>
</div>
ç»„ä»¶å±€éƒ¨æ³¨å†Œ components

ç”¨scriptå˜é‡

var Child = {
template: '<div>A custom component!</div>'
}
new Vue({
// ...
components: {
// <my-component> å°†åªåœ¨çˆ¶æ¨¡æ¿å¯ç”¨
'my-component': Child
}
})

å±€éƒ¨æ³¨å†Œçš„ç»„ä»¶åœ¨å…¶å­ç»„ä»¶ä¸­ä¸å¯ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ å¸Œæœ› ComponentA åœ¨ ComponentB ä¸­å¯ç”¨ï¼Œåˆ™ä½ éœ€è¦è¿™æ ·å†™ï¼š

var ComponentA = { /* ... */ }

var ComponentB = {
  components: {
    'component-a': ComponentA
  },
  // ...
}

webpack å®é™…åº”ç”¨ï¼š

import ComponentA from './ComponentA.vue'

export default {
  components: {
    // ComponentA å³æ˜¯å…ƒç´ åä¹Ÿæ˜¯å˜é‡å
    ComponentA
  },
  // ...

// å­ç»„ä»¶ä¸­è¿™æ ·
<script>
	export default {
		name: 'ComponentA',
		props: {
			msg: String
		}
	}
</script>
}
æ¨¡å—ç³»ç»Ÿä¸­å±€éƒ¨æ³¨å†Œ

.vue æˆ–è€… .js å¯ä»¥çœç•¥

import ComponentA from './ComponentA'
import ComponentC from './ComponentC'

export default {
  components: {
    ComponentA,
    ComponentC
  },
  // ...
}
åŸºç¡€ç»„ä»¶çš„è‡ªåŠ¨åŒ–å…¨å±€æ³¨å†Œ webpack require.context

å¯èƒ½ä½ çš„è®¸å¤šç»„ä»¶åªæ˜¯åŒ…è£¹äº†ä¸€ä¸ªè¾“å…¥æ¡†æˆ–æŒ‰é’®ä¹‹ç±»çš„å…ƒç´ ï¼Œæ˜¯ç›¸å¯¹é€šç”¨çš„ã€‚æˆ‘ä»¬æœ‰æ—¶å€™ä¼šæŠŠå®ƒä»¬ç§°ä¸ºåŸºç¡€ç»„ä»¶ï¼Œå®ƒä»¬ä¼šåœ¨å„ä¸ªç»„ä»¶ä¸­è¢«é¢‘ç¹çš„ç”¨åˆ°ã€‚

æ‰€ä»¥ä¼šå¯¼è‡´å¾ˆå¤šç»„ä»¶é‡Œéƒ½ä¼šæœ‰ä¸€ä¸ªåŒ…å«åŸºç¡€ç»„ä»¶çš„é•¿åˆ—è¡¨ï¼š

import BaseButton from './BaseButton.vue'
import BaseIcon from './BaseIcon.vue'
import BaseInput from './BaseInput.vue'

export default {
  components: {
    BaseButton,
    BaseIcon,
    BaseInput
  }
}
è€Œåªæ˜¯ç”¨äºæ¨¡æ¿ä¸­çš„ä¸€å°éƒ¨åˆ†ï¼š

<BaseInput
  v-model="searchText"
  @keydown.enter="search"
/>
<BaseButton @click="search">
  <BaseIcon name="search"/>
</BaseButton>

å¹¸å¥½å¦‚æœä½ ä½¿ç”¨äº† webpack (æˆ–åœ¨å†…éƒ¨ä½¿ç”¨äº† webpack çš„ Vue CLI 3+)ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ require.context åªå…¨å±€æ³¨å†Œè¿™äº›éå¸¸é€šç”¨çš„åŸºç¡€ç»„ä»¶ã€‚è¿™é‡Œæœ‰ä¸€ä»½å¯ä»¥è®©ä½ åœ¨åº”ç”¨å…¥å£æ–‡ä»¶ (æ¯”å¦‚ src/main.js) ä¸­å…¨å±€å¯¼å…¥åŸºç¡€ç»„ä»¶çš„ç¤ºä¾‹ä»£ç ï¼š


import Vue from 'vue'
import upperFirst from 'lodash/upperFirst'
import camelCase from 'lodash/camelCase'

const requireComponent = require.context(
  // å…¶ç»„ä»¶ç›®å½•çš„ç›¸å¯¹è·¯å¾„
  './components',
  // æ˜¯å¦æŸ¥è¯¢å…¶å­ç›®å½•
  false,
  // åŒ¹é…åŸºç¡€ç»„ä»¶æ–‡ä»¶åçš„æ­£åˆ™è¡¨è¾¾å¼
  /Base[A-Z]\w+\.(vue|js)$/
)

requireComponent.keys().forEach(fileName => {
  // è·å–ç»„ä»¶é…ç½®
  const componentConfig = requireComponent(fileName)

  // è·å–ç»„ä»¶çš„ PascalCase å‘½å
  const componentName = upperFirst(
    camelCase(
      // è·å–å’Œç›®å½•æ·±åº¦æ— å…³çš„æ–‡ä»¶å
      fileName
        .split('/')
        .pop()
        .replace(/\.\w+$/, '')
    )
  )

  // å…¨å±€æ³¨å†Œç»„ä»¶
  Vue.component(
    componentName,
    // å¦‚æœè¿™ä¸ªç»„ä»¶é€‰é¡¹æ˜¯é€šè¿‡ `export default` å¯¼å‡ºçš„ï¼Œ
    // é‚£ä¹ˆå°±ä¼šä¼˜å…ˆä½¿ç”¨ `.default`ï¼Œ
    // å¦åˆ™å›é€€åˆ°ä½¿ç”¨æ¨¡å—çš„æ ¹ã€‚
    componentConfig.default || componentConfig
  )
})
è®°ä½å…¨å±€æ³¨å†Œçš„è¡Œä¸ºå¿…é¡»åœ¨æ ¹ Vue å®ä¾‹ (é€šè¿‡ new Vue) åˆ›å»ºä¹‹å‰å‘ç”Ÿã€‚

isï¼Œé˜²æ­¢ç»„ä»¶æ¸²æŸ“é”™è¯¯


<template is='example1'>
ç»„ä»¶ data ç”¨æ³•

dataå¿…é¡»æ˜¯å‡½æ•°

<div id="app">
    <com1></com1>
    <com1></com1>
    <com1></com1>
</div>

<script type="text/javascript">
    Vue.component('com1', {
        template: '<button v-on:click="counter += 1">{{name}} - {{age}} - {{ counter }}</button>',
        data:function(){
            return {
                name: "tom",
                age: 18,
                counter: 1
            }
        }
    })
    
    var vm = new Vue({
        el:'#app'
    })
</script>
propsä¼ é€’æ•°æ®

prop æ˜¯çˆ¶ç»„ä»¶ç”¨æ¥ä¼ é€’æ•°æ®çš„ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§ã€‚å­ç»„ä»¶éœ€è¦æ˜¾å¼åœ°ç”¨ props é€‰é¡¹ å£°æ˜ â€œpropâ€ï¼š
å…¶ä¸­ï¼Œmessageå¯ä»¥ç”¨v-bindç»‘å®šï¼Œä¹Ÿå¯ä»¥åœ¨ç»„ä»¶åº”ç”¨ä¸Šèµ‹å€¼ã€‚


<div id="app">
    <com1 :message="message"></com1>
    <com1 message="alice"></com1>
    <com1></com1>
</div>

<script type="text/javascript">
    Vue.component('com1', {
        template: '<button v-on:click="counter += 1">{{name}} - {{age}} - {{ counter }}: {{message}}</button>',
        data:function(){
            return {
                name: "tom",
                age: 18,
                counter: 1
            }
        },
        props: ['message']
    })
    
    var vm = new Vue({
        el:'#app',
        data:{
            message: "hello vue 10"
        }
    })
</script>

prop æ˜¯ä¸€ä¸ªå¯¹è±¡è€Œä¸æ˜¯å­—ç¬¦ä¸²æ•°ç»„æ—¶ï¼Œå®ƒåŒ…å«éªŒè¯è¦æ±‚:
type å¯ä»¥æ˜¯ä¸‹é¢åŸç”Ÿæ„é€ å™¨ï¼š
â€¢ String
â€¢ Number
â€¢ Boolean
â€¢ Function
â€¢ Object
â€¢ Array

Vue.component('example', {
props: {
// åŸºç¡€ç±»å‹æ£€æµ‹ ï¼ˆ`null` æ„æ€æ˜¯ä»»ä½•ç±»å‹éƒ½å¯ä»¥ï¼‰ 
propA: Number,
// å¤šç§ç±»å‹ 
propB: [String, Number],
// å¿…ä¼ ä¸”æ˜¯å­—ç¬¦ä¸² 
propC: {
type: String,
required: true 
},
// æ•°å­—ï¼Œæœ‰é»˜è®¤å€¼ 
propD: {
type: Number,
default: 100 
},
// æ•°ç»„ï¼å¯¹è±¡çš„é»˜è®¤å€¼åº”å½“ç”±ä¸€ä¸ªå·¥å‚å‡½æ•°è¿”å› 
propE: {
type: Object,
default: function () {
return { message: 'hello' }
}
},
// è‡ªå®šä¹‰éªŒè¯å‡½æ•° 
propF: {
validator: function (value) {
return value > 10 
}
}
}
})

ç»„ä»¶ä½¿ç”¨ v-on ç»‘å®šè‡ªå®šä¹‰äº‹ä»¶

æ¯ä¸ª Vue å®ä¾‹éƒ½å®ç°äº†äº‹ä»¶æ¥å£(Events interface)ï¼Œå³ï¼š
â€¢ ä½¿ç”¨ $on(eventName) ç›‘å¬äº‹ä»¶
â€¢ ä½¿ç”¨ $emit(eventName) è§¦å‘äº‹ä»¶
v-on:increment=â€incrementTotalâ€ï¼Œè‡ªå®šä¹‰äº‹ä»¶


<div id="counter-event-example"> 
    <p>{{ total }}</p> 
    <button-counter v-on:increment="incrementTotal"></button-counter> 
    <button-counter v-on:increment="incrementTotal"></button-counter> 
</div> 

<script type="text/javascript">
    Vue.component('button-counter', {
        template: '<button v-on:click="increment">{{ counter }}</button>',
        data: function () {
            return {
            counter: 0
            }
        },
        methods: {
            increment: function () {
                this.counter += 1
                this.$emit('increment')
            }
        },
    })
    new Vue({
        el: '#counter-event-example',
        data: {
            total: 0
        },
        methods: {
            incrementTotal: function () {
                this.total += 1
            }
        }
    })

</script>

v-modelåŒå‘ç»‘å®š ä¸ ç»„ä»¶ä¸­å®ç°åŒå‘ç»‘å®š

æ‰€ä»¥è¦è®©ç»„ä»¶çš„ v-model ç”Ÿæ•ˆï¼Œå®ƒå¿…é¡»ï¼š

æ¥å—ä¸€ä¸ª value å±æ€§
åœ¨æœ‰æ–°çš„ value æ—¶è§¦å‘ input äº‹ä»¶

//from åŒå‘ç»‘å®š
<input type="text" id="" v-model="message"/>
<h1>{{message}}</h1>

//ç»„ä»¶ä¸­åŒå‘ç»‘å®š
<div id="app">
    <input type="text" id="" v-model="message"/>
    <h1>{{message}}</h1>
    
    <v-model-example v-model="message"></v-model-example>
</div>

<script type="text/javascript">
    Vue.component('v-model-example',{
        template: '<input type="text" id="" v-bind:value="value" v-on:input="onInput" />',
        props: ['value'],
        methods:{
            onInput: function(event){
                this.$emit('input', event.target.value)
            }
        }
    })
    
    var vm = new Vue({
        data:{
            message: "hello vue"
        },
        el: '#app'
    })
</script>
nativeå±æ€§

ç›‘å¬ç»„ä»¶æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶ï¼Œnativeä¿®é¥°clickä¸ç”Ÿæ•ˆ
å¯¹ç»„ä»¶å¼€å‘æ¥è¯´ï¼Œåªæœ‰ç»„ä»¶å†…çš„å†…å®¹å¯ç”¨ï¼Œæ‰€ä»¥ç»„ä»¶å†…éœ€è¦ç”¨åˆ°çš„å†…å®¹å…¨éƒ¨åœ¨ç»„ä»¶å†…ç”³æ˜ï¼Œæ–¹æ³•/äº‹ä»¶ç”¨v-onç›‘å¬ï¼Œå€¼ç”¨propsä¼ é€’ã€‚
this.$emit(â€˜component_methodâ€™)ï¼Œè¿™ä¸ªæ˜¯å¼ºè¡Œè°ƒç”¨äº‹ä»¶component_methodï¼Œè€Œäº‹ä»¶ç›‘å¬component_methodåˆè¢«ç»‘å®šåˆ°method1ï¼Œæ‰€ä»¥ç­‰åŒäºè°ƒèµ·vm.method1


<div id="app">
    <input type="button" id="" @click.native="method1"/>
    <component is="example" v-on:component_method="method1"></component>
</div>

Vue.component('example',{
    template: '<input type="button" id="" @click="component_method"/>',
    methods:{
        component_method: function(){
            alert("hello component")
            this.$emit('component_method')
        }
    }
})

var vm = new Vue({
    data:{
        message: "hello vue"
    },
    el: '#app',
    methods:{
        method1: function(){
            alert("hello vue")
        }
    }
})
event.target
äº‹ä»¶å±æ€§ï¼Œè¿”å›å½“å‰å…ƒç´ ã€ä¸Šä¸‹æ–‡ã€‚

è¿˜å¯ä»¥ç”¨Mathåº“


data:{
    message: "mess" + Math.random()
}

éçˆ¶å­ç»„ä»¶é€šä¿¡

æœ‰æ—¶å€™éçˆ¶å­å…³ç³»çš„ç»„ä»¶ä¹Ÿéœ€è¦é€šä¿¡ã€‚åœ¨ç®€å•çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨ä¸€ä¸ªç©ºçš„ Vue å®ä¾‹ä½œä¸ºä¸­å¤®äº‹ä»¶æ€»çº¿

var bus = new Vue()

// è§¦å‘ç»„ä»¶ A ä¸­çš„äº‹ä»¶ 
bus.$emit('id-selected', 1)

// åœ¨ç»„ä»¶ B åˆ›å»ºçš„é’©å­ä¸­ç›‘å¬äº‹ä»¶ 
bus.$on('id-selected', function (id) {
// ... 
})

çˆ¶å­ç»„ä»¶é€šä¿¡

props,$ref,$emit
åŸºæœ¬æ¡†æ¶

//çˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶
<template>
    <h1>çˆ¶ç»„ä»¶</h1>
    <child></child>
</template>

<script>
    //æ³¨å†Œ
    import child from 'child.vue'
    export default {
        components: {child}
    }
<script>

//å­ç»„ä»¶
<template>
    <h1>å­ç»„ä»¶</h1>
</template>
props



$ref
å¯ä»¥ä½¿ç”¨ ref ä¸ºå­ç»„ä»¶æŒ‡å®šä¸€ä¸ªç´¢å¼• ID ã€‚ä¾‹å¦‚ï¼š


<div id="parent"> 
<user-profile ref="profile"></user-profile> 
</div>

var parent = new Vue({ el: '#parent' })
// è®¿é—®å­ç»„ä»¶ 
var child = parent.$refs.profile
å¼‚æ­¥ç»„ä»¶

åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†åº”ç”¨æ‹†åˆ†ä¸ºå¤šä¸ªå°æ¨¡å—ï¼ŒæŒ‰éœ€ä»æœåŠ¡å™¨ä¸‹è½½ã€‚ä¸ºäº†è®©äº‹æƒ…æ›´ç®€å•ï¼Œ Vue.js å…è®¸å°†ç»„ä»¶å®šä¹‰ä¸ºä¸€ä¸ªå·¥å‚å‡½æ•°ï¼ŒåŠ¨æ€åœ°è§£æç»„ä»¶çš„å®šä¹‰ã€‚Vue.js åªåœ¨ç»„ä»¶éœ€è¦æ¸²æŸ“æ—¶è§¦å‘å·¥å‚å‡½æ•°ï¼Œå¹¶ä¸”æŠŠç»“æœç¼“å­˜èµ·æ¥ï¼Œç”¨äºåé¢çš„å†æ¬¡æ¸²æŸ“ã€‚ä¾‹å¦‚ï¼š

Vue.component('async-example', function (resolve, reject) {
setTimeout(function () {
resolve({
template: '<div>I am async!</div>' 
})
}, 1000)
})

å·¥å‚å‡½æ•°æ¥æ”¶ä¸€ä¸ª resolve å›è°ƒï¼Œåœ¨æ”¶åˆ°ä»æœåŠ¡å™¨ä¸‹è½½çš„ç»„ä»¶å®šä¹‰æ—¶è°ƒç”¨ã€‚ä¹Ÿå¯ä»¥è°ƒç”¨ reject(reason) æŒ‡ç¤ºåŠ è½½å¤±è´¥ã€‚è¿™é‡Œ setTimeout åªæ˜¯ä¸ºäº†æ¼”ç¤ºã€‚æ€ä¹ˆè·å–ç»„ä»¶å®Œå…¨ç”±ä½ å†³å®šã€‚æ¨èé…åˆä½¿ç”¨ ï¼šWebpack çš„ä»£ç åˆ†å‰²åŠŸèƒ½ï¼š


Vue.component('async-webpack-example', function (resolve) {
// è¿™ä¸ªç‰¹æ®Šçš„ require è¯­æ³•å‘Šè¯‰ webpack 
// è‡ªåŠ¨å°†ç¼–è¯‘åçš„ä»£ç åˆ†å‰²æˆä¸åŒçš„å—ï¼Œ 
// è¿™äº›å—å°†é€šè¿‡ Ajax è¯·æ±‚è‡ªåŠ¨ä¸‹è½½ã€‚ 
require(['./my-async-component'], resolve)
})

ä½ å¯ä»¥ä½¿ç”¨ Webpack 2 + ES2015 çš„è¯­æ³•è¿”å›ä¸€ä¸ª Promise resolve å‡½æ•°ï¼š

Vue.component(
'async-webpack-example',
() => System.import('./my-async-component')
)

é€’å½’ç»„ä»¶

ç»„ä»¶åœ¨å®ƒçš„æ¨¡æ¿å†…å¯ä»¥é€’å½’åœ°è°ƒç”¨è‡ªå·±ï¼Œä¸è¿‡ï¼Œåªæœ‰å½“å®ƒæœ‰ name é€‰é¡¹æ—¶æ‰å¯ä»¥ï¼š

name: 'unique-name-of-my-component'

When you register a component globally using Vue.component, the global ID is automatically set as the componentâ€™s name option. 

Vue.component('unique-name-of-my-component', {
// ... 
})

If youâ€™re not careful, recursive components can also lead to infinite loops: 

name: 'stack-overflow',
template: '<div><stack-overflow></stack-overflow></div>'
ä¸Šé¢ç»„ä»¶ä¼šå¯¼è‡´ä¸€ä¸ªé”™è¯¯ â€œmax stack size exceededâ€ ï¼Œæ‰€ä»¥è¦ç¡®ä¿é€’å½’è°ƒç”¨æœ‰ç»ˆæ­¢æ¡ä»¶ (æ¯”å¦‚é€’å½’è°ƒç”¨æ—¶ä½¿ç”¨ v-if å¹¶è®©ä»–æœ€ç»ˆè¿”å› false )ã€‚

å†…è”æ¨¡ç‰ˆ inline-template

å¦‚æœå­ç»„ä»¶æœ‰ inline-template ç‰¹æ€§ï¼Œç»„ä»¶å°†æŠŠå®ƒçš„å†…å®¹å½“ä½œå®ƒçš„æ¨¡æ¿ï¼Œè€Œä¸æ˜¯æŠŠå®ƒå½“ä½œåˆ†å‘å†…å®¹ã€‚è¿™è®©æ¨¡æ¿æ›´çµæ´»ã€‚

<my-component inline-template> 
<div> 
<p>These are compiled as the component's own template.</p> 
<p>Not parent's transclusion content.</p> 
</div> 
</my-component>
ä½†æ˜¯ inline-template è®©æ¨¡æ¿çš„ä½œç”¨åŸŸéš¾ä»¥ç†è§£ã€‚æœ€ä½³å®è·µæ˜¯ä½¿ç”¨ template é€‰é¡¹åœ¨ç»„ä»¶å†…å®šä¹‰æ¨¡æ¿æˆ–è€…åœ¨ .vue æ–‡ä»¶ä¸­ä½¿ç”¨ template å…ƒç´ ã€‚

v-once æ¸²æŸ“ç¼“å­˜

ä½¿ç”¨ v-once çš„ä½çº§é™æ€ç»„ä»¶(Cheap Static Component)

å°½ç®¡åœ¨ Vue ä¸­æ¸²æŸ“ HTML å¾ˆå¿«ï¼Œä¸è¿‡å½“ç»„ä»¶ä¸­åŒ…å«å¤§é‡é™æ€å†…å®¹æ—¶ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ v-once å°†æ¸²æŸ“ç»“æœç¼“å­˜èµ·æ¥ï¼Œå°±åƒè¿™æ ·ï¼š

Vue.component('terms-of-service', {
template: '\ 
<div v-once>\
<h1>Terms of Service</h1>\
... a lot of static content ...\
</div>\
'
})

ç»„ä»¶æ³¨å†Œä¸åŠ¨æ€ç»„ä»¶ isç‰¹æ€§

components ä¸ componentå…ƒç´ 

å¤šä¸ªç»„ä»¶å¯ä»¥ä½¿ç”¨åŒä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œç„¶ååŠ¨æ€åœ°åœ¨å®ƒä»¬ä¹‹é—´åˆ‡æ¢ã€‚ä½¿ç”¨ä¿ç•™çš„ component å…ƒç´ ï¼ŒåŠ¨æ€åœ°ç»‘å®šåˆ°å®ƒçš„ is ç‰¹æ€§

var vm = new Vue({
el: '#example',
data: {
currentView: 'home' 
},
components: {
home: { /* ... */ },
posts: { /* ... */ },
archive: { /* ... */ }
}
})

<component v-bind:is="currentView"> 
<!-- ç»„ä»¶åœ¨ vm.currentview å˜åŒ–æ—¶æ”¹å˜ï¼ --> 
</component> 


ä¹Ÿå¯ä»¥ç›´æ¥ç»‘å®šåˆ°ç»„ä»¶å¯¹è±¡ä¸Šï¼š 
var Home = {
template: '<p>Welcome home!</p>' 
}
var vm = new Vue({
el: '#example',
data: {
currentView: Home
}
})

åŠ¨æ€ç»„ä»¶ ä¸ keep-alive

å¦‚æœæŠŠåˆ‡æ¢å‡ºå»çš„ç»„ä»¶ä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œå¯ä»¥ä¿ç•™å®ƒçš„çŠ¶æ€æˆ–é¿å…é‡æ–°æ¸²æŸ“ã€‚ä¸ºæ­¤å¯ä»¥æ·»åŠ ä¸€ä¸ª keep-alive æŒ‡ä»¤å‚æ•°ï¼š

<keep-alive> 
<component :is="currentView"> 
<!-- éæ´»åŠ¨ç»„ä»¶å°†è¢«ç¼“å­˜ï¼ --> 
</component> 
</keep-alive>
